@page
@{
    ViewData["Title"] = "Registro";
}

<div class="row justify-content-center mt-4">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-body">
                <h3 class="text-center mb-4">Registro de Nuevo Cliente</h3>
                <form id="regForm">
                    <div class="mb-2">
                        <label>Nombre Completo</label>
                        <input id="fullName" class="form-control" required />
                    </div>
                    <div class="mb-2">
                        <label>Email</label>
                        <input type="email" id="email" class="form-control" required />
                    </div>
                    <div class="row">
                        <div class="col-6 mb-2">
                            <label>Teléfono</label>
                            <input id="phone" class="form-control" required />
                        </div>
                        <div class="col-6 mb-2">
                            <label>Dirección</label>
                            <input id="address" class="form-control" required />
                        </div>
                    </div>
                    <div class="mb-3">
                        <label>Contraseña</label>
                        <input type="password" id="password" class="form-control" required />
                    </div>
                    <button type="submit" class="btn btn-success w-100">Crear Cuenta</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById("regForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const data = {
            fullName: document.getElementById("fullName").value,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value,
            address: document.getElementById("address").value,
            password: document.getElementById("password").value
        };

        const res = await fetch('/api/Auth/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });

        if (res.ok) {
            alert("¡Registro exitoso! Por favor inicia sesión.");
            window.location.href = "/Login";
        } else {
            const txt = await res.text();
            alert("Error: " + txt);
        }
    });
</script>